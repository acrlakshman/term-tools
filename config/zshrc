# Load oh-my-zsh
ZSH=$HOME/.oh-my-zsh
ZSH_THEME="wjakob"
plugins=(git zsh-syntax-highlighting)
DISABLE_AUTO_UPDATE="true"
source $ZSH/oh-my-zsh.sh
source ~/.term-tools/config/shrc.sh

autoload up-line-or-beginning-search
autoload down-line-or-beginning-search
zle -N up-line-or-beginning-search
zle -N down-line-or-beginning-search
alias grpe=grep
alias gdb='gdb -quiet'

# OSX / iTerm2 key bindings
bindkey $terminfo[kbs]   backward-delete-char           # Backspace
bindkey $terminfo[kdch1] delete-char                    # Delete
bindkey $terminfo[khome] beginning-of-line              # Home
bindkey "^A"             beginning-of-line
bindkey $terminfo[kend]  end-of-line                    # End
bindkey "^E"             end-of-line
bindkey $terminfo[kpp]   up-line-or-history             # PageUp
bindkey $terminfo[knp]   down-line-or-history           # PageDown
bindkey $terminfo[kcuu1] up-line-or-beginning-search    # Down
bindkey $terminfo[kcud1] down-line-or-beginning-search  # Up
bindkey $terminfo[kcub1] backward-char                  # Left
bindkey $terminfo[kcuf1] forward-char                   # Right

bindkey -M vicmd $terminfo[khome] beginning-of-line     # Home
bindkey -M vicmd $terminfo[kend]  end-of-line           # End

# Search paths
export PATH=/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin

# Support High-DPI in Qt5 apps
export QT_AUTO_SCREEN_SCALE_FACTOR=1

# Generate a compile_commands.json file
alias cmake='cmake -DCMAKE_EXPORT_COMPILE_COMMANDS=1'

# Convenience flags to switch between release and debug mode
alias cmake_deb='cmake $@ -GNinja -DCMAKE_BUILD_TYPE=DEBUG'
alias cmake_rel='cmake $@ -GNinja -DCMAKE_BUILD_TYPE=RELEASE'

# CMake aliases for various compilers
alias cmake_gcc='cmake $@ -GNinja -DCMAKE_CXX_COMPILER=g++ -DCMAKE_C_COMPILER=gcc'
alias cmake_clang='cmake $@ -GNinja -DCMAKE_C_COMPILER=clang -DCMAKE_CXX_COMPILER=clang++'
alias cmake_clean='rm -rf CMakeCache.txt CMakeFiles'

# ls: don't wrap entries with spaces into quotes
export QUOTING_STYLE=literal

export NINJA_STATUS="[%u/%r/%f] "
export CMAKE_GENERATOR='Ninja'

export LC_ALL=en_US.UTF-8
export LANG=en_US.UTF-8

# Don't make core dumps by default
ulimit -c 0

# Other aliases
alias n=ninja
alias python=python3
alias ipython=ipython3
alias pip=pip3
alias octave='octave --no-gui-libs'
alias pdb='python3 -u -m pdb -c continue'
function skim () {
    /Applications/Skim.app/Contents/MacOS/Skim $@ &> /dev/null &
}

# Don't include "_something" AppleDouble files in tar files, etc.
export COPYFILE_DISABLE=1
